description: |
  A minimal pipeline that runs shear-specific tasks, separate from the
  standard DRP processing.

tasks:
  makeWarp: descwl_coadd_task.MakeShearWarpTask
  assembleCoadd:
    # The configuration is same as the default values defined in the
    # PipelineTasks. The purpose of overrides here is to demonstrate the
    # configurable capacity of the pipeline and the tasks.
    class: descwl_coadd_task.AssembleShearCoaddSlowTask
    config:
      connections.multiple_cell_coadd: shearCoadd
      psf_dimensions: 21
      remove_poisson: False
  # TODO: Metadection goes here.

# Ensure that the various tasks are configured in an self-consistent manner.
contracts:
# Do not request more noise planes that those generated by makeWarp.
- assembleCoadd.num_noise_realizations <= makeWarp.num_noise_realizations
# Warp (and coadd) PSFs when constructing the coadd using the same parameters
# used for warping the image.
- assembleCoadd.psf_warper == makeWarp.warper